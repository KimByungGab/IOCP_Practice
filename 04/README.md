## 변경된 점
1. ClientInfo를 NetworkCore 클래스에서 분리
2. NetworkDefine.h를 추가하여 미리 생성하고 싶은 네트워크 공통 헤더파일을 구축
3. 기존의 에코서버와 다르게 send 기능의 전담 쓰레드와 전담 큐가 생겼다. 이제 send를 직접하지 않고 큐에 패킷을 넣으면 알아서 동작하도록 쓰레드가 구축되어있다.

## 예제와 다른 점
예제에서는 ClientInfo에 많은 기능을 쥐어주었다. 때문에 기존에 내가 설계를 했던 것은 실제 main 서버는 NetworkServer 클래스만 다루고 NetworkCore 클래스에서 그때그때 정보를 다른 클래스에서 가져오는 방식을 원했었다. (NetworkServer -> NetworkCore -> ClientInfo)<br>
때문에 나는 ClientInfo에 많은 기능을 넣지 않고 NetworkCore가 직접 Send와 Recv를 담당하도록 구조를 약간 놔둔 부분이 존재했다.

그리고 두번째로 예제의 send가 진행될때마다 Overlapped I/O 구조체를 동적할당을 한다. 하지만 내 생각에는 send처럼 많이 일어나는 사항이 일어날때마다 동적할당을 계속 빈번하게 일어나게하면 메모리 단편화가 쉽게 일어나서 나중에 사태가 심각해질수도 있다고 생각한다. 때문에 send 버퍼와 Overlapped I/O 구조체는 기존처럼 그대로 사용하긴 했다.
하지만 패킷의 큐는 동적할당을 하게 만들어서 아쉽다. 간단한 해결책으로는 오브젝트풀을 이용해서 메모리를 선점하고 그 안에서 놀 수 있도록 하는 것이 좋다고 생각한다. 큐의 size가 엄청 커지긴 할 텐데 감당해야 할 사안이기도 할 듯 싶다. 때문에 조금 CPU를 잡아먹더라도 thread sleep 시간을 1ms로 만들어서 최대한 빠르게 요청을 해결하기로 생각했다.

## 내 생각
지금까지는 요청이 올 때마다 바로 send를 직접 사용해서 에코서버를 운영했다면 이젠 쓰레드를 전담하여 전송을 할 수 있도록 만들었다.
이것은 다시말해 send를 연속해서 계속 처리를 할 수 있다는 뜻이며 Recv와 Send가 서로 다르게 움직이기 때문에 Send에 관해서 더욱 관심사를 줄일 수도 있고 Send를 집중적으로 맡을 수도 있기 때문에 더욱 효율적으로 처리가 가능해질것이다. 이는 어떤 의미에서는 관심사 분리이자 다른 의미에서는 Send를 신경쓸 일이 적어졌다는 뜻이다.
이렇게 앞으로 빈번한 일들을 처리하게 되면 더욱 개발자 입장에서 간편하게 만들기 위한 코어한 코드 구조를 만드는 것을 생각해야겠다.
